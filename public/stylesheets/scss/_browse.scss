@include keyframe(swing) {
    0%{
        @include prefix(transform, rotate(0deg));
    }
    25% {
        @include prefix(transform, rotate(3deg));
    }
    75% {
        @include prefix(transform, rotate(-3deg));
    }
    100%{
        @include prefix(transform, rotate(0deg));
    }
}
@include keyframe(shadow-swing) {
    0%{
        @include prefix(transform, rotate(0deg) scaleX(1));
        //background: radial-gradient(50% center, ellipse farthest-side, rgba(0, 0, 0, $shadowOpacity), rgba(0, 0, 0, 0));
    }
    25% {
        @include prefix(transform, rotate(-2deg) scaleX(1.1));
        //background: radial-gradient(65% center, ellipse farthest-side, rgba(0, 0, 0, $shadowOpacity), rgba(0, 0, 0, 0));
    }
    50%{
        @include prefix(transform, rotate(0deg) scaleX(1));
        //background: radial-gradient(50% center, ellipse farthest-side, rgba(0, 0, 0, $shadowOpacity), rgba(0, 0, 0, 0));
    }
    75% {
        @include prefix(transform, rotate(2deg) scaleX(1.1));
        //background: radial-gradient(35% center, ellipse farthest-side, rgba(0, 0, 0, $shadowOpacity), rgba(0, 0, 0, 0));
    }
    100%{
        @include prefix(transform, rotate(0deg) scaleX(1));
        //background: radial-gradient(50% center, ellipse farthest-side, rgba(0, 0, 0, $shadowOpacity), rgba(0, 0, 0, 0));
    }
}

.content.browse-page{
    .tote-grid-element{
        display: inline-block;
        float: left;
        width: 25%;
        height: 0;
        padding-bottom: 25%;
        position: relative;

        cursor: pointer;
        overflow: hidden;
        background-color: #ececec;
        @include linear-gradient ( -45deg, #fff, $lightGrey );
        @include prefix (transition, 0.4s $easing-curve);

        &.start{
            @include prefix (transform, translateY(100%));
            opacity:0;
        }
        &.no-transition{
            @include prefix (transition, none);
        }
        &:after{
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            opacity: 0;
            @include prefix (transition, 0.3s $easing-curve);
            pointer-events: none;
        }
        &:hover{
            &:after{
                opacity: 1;
            }

            .tote-wrap{
                max-width: 65%;
            }
            .actual-tote{
                @include prefix (animation, swing 2s infinite ease-in-out);
            }
            .tote-shadow{
                @include prefix (animation, shadow-swing 2s infinite ease-in-out);
            }
            .heart-wrap{
                opacity: 1;
            }
        }

        .heart-wrap{
            position: absolute;
            top: 20px;
            right: 20px;
            border: 2px solid rgba(0,0,0,0.15);
            @include prefix (border-radius, 50%);
            width: 40px;
            height: 40px;
            z-index: $z-first-level;
            @include prefix (transition, 0.3s $easing-curve);
            opacity: 0;

            &:hover{
                border: 2px solid rgba(0,0,0,0.3);
                @include prefix (transform, scale(1.1)); 
                
                .heart{
                    opacity: 0.75;
                }
            }

            .heart{
                width: 20px;
                height: 20px;
                position: absolute;
                left: 0;
                right: 0;
                margin: 0 auto;
                top: 50%;
                opacity: 0.5;
                @include prefix (transform, translateY(-50%));
                @include prefix (transition, 0.3s $easing-curve);
                
                .inner-heart{
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    
                    &.grey{
                        background: url("/images/heart-grey.svg") center center no-repeat;
                        background-size: contain;
                        @include prefix (transition, 0.3s $easing-curve);
                    }
                    &.white{
                        background: url("/images/heart-white.svg") center center no-repeat;
                        background-size: contain;
                    }
                }
            }
            .heart-circle{
                position: absolute;
                width: 2px;
                height: 2px;
                top: 50%;
                left: 0;
                right: 0;
                margin: 0 auto;
                background-color: #fe3232;
                opacity: 0;
                @include prefix (transform, translateY(-50%));
                @include prefix (transition, 0.3s $easing-curve);
                @include prefix (border-radius, 50%);
            }

            &.favorited{
                opacity: 0.85;
                border: 2px solid rgba(0,0,0,0);
                @include prefix (transform, scale(1.1)); 
                
                &:hover{
                    opacity: 1;
                }

                .heart-circle{
                    width: 100%;
                    height: 100%;
                    opacity: 0.95;
                    @include prefix (box-shadow, 0 3px 5px rgba(0,0,0,0.2));
                }
                
                .heart{
                    opacity: 0.95;
                    @include prefix (transform, translateY(-49%) scale(1.1));

                    .grey{
                        opacity: 0;
                    }
                }
            }
        }
        
        .tote-wrap{
            max-width: 60%;
            @include centerAbsH;
            @include centerAbsV;
            z-index: $z-first-level;

            .actual-tote{
                @include prefix (transform-origin, top center);
            }
        }
    }
}

@media screen and (max-width: $lrgBP) {
    .content.browse-page .tote-grid-element{
        width: 33.33%;
        padding-bottom: 33.33%;
    }
}
@media screen and (max-width: $medBP) {
    .content.browse-page .tote-grid-element{
        width: 50%;
        padding-bottom: 50%;
    }
}
@media screen and (max-width: $smlBP) {
    .content.browse-page .tote-grid-element{
        width: 100%;
        padding-bottom: 100%;
    }
}